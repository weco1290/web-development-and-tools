{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://todo/./src/constants.js","webpack://todo/./src/listeners.js","webpack://todo/./src/render.js","webpack://todo/./src/services.js","webpack://todo/./src/state.js","webpack://todo/webpack/bootstrap","webpack://todo/webpack/runtime/define property getters","webpack://todo/webpack/runtime/hasOwnProperty shorthand","webpack://todo/webpack/runtime/make namespace object","webpack://todo/./src/todos.js"],"sourcesContent":["// Constants benefits\n// - reduces risk of typos (IDE can code-complete)\n// - easier to confirm it is correct (easier to check properties than strings)\n// - If a value changes, you can change it in one place and the rest of the code can continue to use the constant\n\n// Might be SERVER_CODES and CLIENT_CODES if we had more and different constants\nexport const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  REQUIRED_USERNAME: 'required-username',\n  REQUIRED_TASK: 'required-task',\n  TASK_MISSING: 'noSuchId', // Someone was inconsistent!\n};\n\nexport const CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n  // The [] below uses the variable value as the key\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n  // Here we use 'dog' to simulate a bad password\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\n  [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\n  default: 'Something went wrong.  Please try again',\n};\n","import {\n  fetchLogin,\n  fetchLogout,\n  fetchTodos,\n  fetchUpdateTodo,\n  fetchAddTodo,\n  fetchDeleteTodo,\n} from './services';\nimport {\n  waitOnTodos,\n  waitOnLogin,\n  setTodos,\n  setError,\n  login,\n  logout,\n  updateTodo,\n  addTodo,\n} from './state';\nimport render from './render';\n\nexport function addAbilityToLogin({ state,  appEl }) {\n  // Using 'submit' so we can get both submit via button-click and by \"enter\"\n  appEl.addEventListener('submit', (e) => {\n    if(!e.target.classList.contains('login__form')) {\n      return;\n    }\n    e.preventDefault();\n\n    const username = appEl.querySelector('.login__username').value;\n    waitOnLogin();\n    render({ state, appEl }); // show loading state\n    fetchLogin( username )\n    .then( todos => {\n      login(username);\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n\n  });\n}\n\nexport function addAbilityToLogout({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__logout')) {\n      return;\n    }\n    logout();\n    render({ state, appEl });\n    fetchLogout() // We don't really care about results\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRefresh({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__refresh')) {\n      return;\n    }\n\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchTodos()\n    .then( todos => {\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToToggleComplete({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__toggle')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchUpdateTodo(id, { done: !state.todos[id].done } )\n    .then( todo => { // Service call returns the updated todo\n      updateTodo({ id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToAddTodo({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    if(!e.target.classList.contains('add__form')) {\n      return;\n    }\n    e.preventDefault(); // Don't let form submit\n    const task = appEl.querySelector('.add__task').value;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchAddTodo(task)\n    .then( todo => {\n      // Notice we get the id of the new todo from the returned todo\n      addTodo({ id: todo.id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRemoveTodo({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__delete')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchDeleteTodo(id)\n      .then( () => {\n        return fetchTodos(); // Return the promise so we can chain\n      })\n      .then( todos => {\n        setTodos(todos);\n        render({ state, appEl });\n      })\n      .catch( err => {\n        setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n        render({ state, appEl });\n      });\n  });\n}\n\n","// Here we rebuild ALL the HTML whenever the state changes\n// That is not the most efficient way to do it\n// We COULD make these functions smarter about noticing what state changed\n// and what HTML is dependent on that state\n// and only replace the HTML that needs to be replaced\n// but we'll be moving to React soon where someone has already written that\n// The key part here is to see how the HTML is based on state\n// - render does not what \"action\" was taken, only the current state\n// - so our render is decoupled from the actions and events\n\nfunction render({ state, appEl }) {\n  const html = `\n   <main class=\"\">\n     ${ generateStatusHtml( state ) }\n     ${ generateLoginHtml( state ) }\n     ${ generateContentHtml( state ) }\n   </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateStatusHtml( state ) {\n  return `\n      <div class=\"status\">${state.error}</div>\n  `;\n}\n\nfunction generateLoginHtml( state ) {\n  if(state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `\n  }\n  if(state.isLoggedIn) {\n    return ``;\n  }\n\n  // The #login below isn't \"real\" - this form should never navigate\n  // I included it merely as a hint to what the form does\n  return `\n      <div class=\"login\">\n        <form class=\"login__form\" action=\"#login\">\n          <label>\n            <span>Username:</span>\n            <input class=\"login__username\" value=\"\">\n          </label>\n          <button class=\"login__button\" type=\"submit\">Login</button>\n        </form>\n      </div>\n  `;\n}\n\nfunction generateContentHtml( state ) {\n  if(!state.isLoggedIn) {\n    return ``;\n  }\n  if(state.isTodoPending) {\n    return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <div class=\"todos__waiting\">Loading Todos...</div>\n      </div>\n    `;\n  }\n  return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        ${generateTodosHtml( state )}\n        ${generateAddTodoHtml( state )}\n      </div>\n  `;\n}\n\nfunction generateControlsHtml( state ) {\n  return `\n        <div class=\"controls\">\n          <button class=\"controls__refresh\">Refresh</button>\n          <button class=\"controls__logout\">Logout</button>\n        </div>\n  `;\n}\n\nfunction generateTodosHtml( state ) {\n  const todosHtml = Object.values(state.todos).map( todo => {\n    const isDoneClass = todo.done ? \"todo__text--complete\" : \"\";\n    const isAddedClass = state.lastAddedTodoId === todo.id ? \"todo__text--added\" : \"\";\n    return `\n      <li class=\"todo\">\n        <label\n          for=\"todo__toggle--${todo.id}\"\n        >\n          <input\n            id=\"todo__toggle--${todo.id}\"\n            class=\"todo__toggle\"\n            data-id=\"${todo.id}\"\n            type=\"checkbox\"\n            ${todo.done ? \"checked\" : \"\"}\n          >\n          <span\n            data-id=\"${todo.id}\"\n            class=\"todo__toggle todo__text ${ isDoneClass } ${isAddedClass} \"\n          >\n            ${todo.task}\n          </span>\n        </label>\n        <button\n          data-id=\"${todo.id}\"\n          class=\"todo__delete\"\n        >\n          &#10060;\n        </button>\n      </li>\n      `;\n  }).join('');\n  return todosHtml ? `<ul class=\"todos\">${todosHtml}</ul>` : `<p>No Todo Items yet, add one!</p>`;\n}\n\nfunction generateAddTodoHtml( state ) {\n  return `\n        <form class=\"add__form\" action=\"#add\">\n          <label for=\"add__task\">\n            New Task:\n            <input id=\"add__task\" class=\"add__task\">\n          </label>\n          <button type=\"submit\" class=\"add__button\">Add</button>\n        </form>\n  `;\n}\n\nexport default render;\n","// Each of these functions is a bit repetitive\n// We COULD write a function that they each use to reduce that\n// But\n// (1) While THESE services all use the same structure, not all services will\n// (2) I wanted to demonstrate what was happening rather than abstract it away\n//     so that you will be able to write a different way to handle different services\n//\n// Key lesson: These functions all handle:\n// - MAKING the service calls\n// - Passing the data\n// - Parsing the results\n//\n// But these functions DO NOT\n// - change the state\n// - change the DOM\n//\n// This makes these functions fully decoupled and reuseable\n//\n// Notice they each return a promise. This is essential.\n// It allows the caller to attach reactions in then() and catch() clauses\nexport function fetchAddTodo(task) {\n  return fetch('/api/todos', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( { task } ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchDeleteTodo(id) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchUpdateTodo( id, todoUpdates ) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'PATCH',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( todoUpdates ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchTodos() {\n  return fetch('/api/todos')\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchSession() {\n  return fetch('/api/session', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/session', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json'\n    }),\n    body: JSON.stringify({ username }),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\n","import { MESSAGES } from './constants';\n\nconst state = {\n  // We store these as an object because we will access by id\n  todos: {},\n  isLoggedIn: false,\n  isLoginPending: true, // We start with our login status unknown\n  isTodoPending: false,\n  username: '',\n  lastAddedTodoId: '', // Used for fancy CSS on newest item\n  error: '',\n};\n\nexport function waitOnLogin() {\n  state.isLoggedIn = false;\n  state.isLoginPending = true;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function waitOnTodos() {\n  state.todos = {};\n  state.isTodoPending = true;\n  state.error = '';\n}\n\nexport function setTodos(todos) {\n  state.todos = todos;\n  state.isTodoPending = false;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function updateTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function addTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.lastAddedTodoId = id;\n  state.error = '';\n}\n\nexport function setError(error) {\n  if(!error) {\n    state.error = '';\n    return;\n  }\n  state.isLoginPending = false;\n  state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from './constants';\nimport state, {\n  login,\n  logout,\n  waitOnTodos,\n  setTodos,\n  setError,\n} from './state';\nimport {\n  fetchAddTodo,\n  fetchDeleteTodo,\n  fetchUpdateTodo,\n  fetchTodos,\n  fetchSession,\n} from './services';\nimport render from './render';\nimport {\n  addAbilityToLogin,\n  addAbilityToLogout,\n  addAbilityToRefresh,\n  addAbilityToToggleComplete,\n  addAbilityToAddTodo,\n  addAbilityToRemoveTodo,\n} from './listeners';\n\n// Main code\n// This is where someone new to the code will see what happens on load\n// You want to make it easy to see the big picture\n// and easy to find the part you care about\n// - Why did you come here? To fix a bug? Add a feature?\n// - Make it easy to find the relevant code\n// - skimmable\n\nconst appEl = document.querySelector('#app');\nrender({ state, appEl });\naddAbilityToLogin({ state,  appEl });\naddAbilityToLogout({ state, appEl });\naddAbilityToRefresh({ state, appEl });\naddAbilityToToggleComplete({ state, appEl });\naddAbilityToAddTodo({ state, appEl });\naddAbilityToRemoveTodo({ state, appEl });\ncheckForSession();\n\n//////////\n\nfunction checkForSession() {\n  fetchSession()\n  .then( session => { // The returned object from the service call\n    login(session.username); // We do not have todos yet!\n    render({ state, appEl });            // Show we are logged in but don't have todos\n    return fetchTodos(); // By returning this promise we can chain the original promise\n  })\n  .catch( err => {\n    if( err?.error === SERVER.AUTH_MISSING ) {\n      return Promise.reject({ error: CLIENT.NO_SESSION }) // Expected, not a problem\n    }\n    return Promise.reject(err); // Pass any other error unchanged\n  })\n  .then( todos => {\n    setTodos(todos);\n    render({ state, appEl });\n  })\n  .catch( err => {\n    if( err?.error == CLIENT.NO_SESSION ) { // expected \"error\"\n      logout(); // No longer waiting, set to logged out case\n      render({ state, appEl });\n      return;\n    }\n    // For unexpected errors, report them\n    setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    render({ state, appEl });\n  });\n}\n\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","fetchLogin","fetchLogout","fetchTodos","fetchUpdateTodo","fetchAddTodo","fetchDeleteTodo","waitOnTodos","waitOnLogin","setTodos","setError","login","logout","updateTodo","addTodo","render","addAbilityToLogin","_ref","state","appEl","addEventListener","e","target","classList","contains","preventDefault","username","querySelector","value","then","todos","err","error","addAbilityToLogout","_ref2","addAbilityToRefresh","_ref3","addAbilityToToggleComplete","_ref4","id","dataset","done","todo","addAbilityToAddTodo","_ref5","task","addAbilityToRemoveTodo","_ref6","html","concat","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","isTodoPending","generateControlsHtml","generateTodosHtml","generateAddTodoHtml","todosHtml","Object","values","map","isDoneClass","isAddedClass","lastAddedTodoId","join","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","todoUpdates","fetchSession","document","checkForSession","session"],"sourceRoot":""}